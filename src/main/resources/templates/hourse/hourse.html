<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <script th:src="@{/js/jquery-2.1.4.min.js}"></script>
    <script th:src="@{/js/poker.min.js}"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" th:src="@{/js/customprompt.js}" src="js/customprompt.js"></script>
    <style>
        .alert-pormpt {
        // 自定义提示框样式 background: rgba(0, 0, 0, 0.8);
            color: #fff;
        }
    </style>
    <script>
    </script>
    <title>[(${result.content.hourseName})]</title>
</head>
<body>
    <h4>房间号: [(${result.content.hourseCode})]</h4>
    <b><span id="total">我的积分:<span/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <button onclick="start()">开始</button>
    <br/><br/>

    <div id="container4">
    </div>

    <script>
        var result = [(${result})]
        console.log(result);
        if (result.success == true) {
            success_prompt(result.msg);
        } else {
            warning_prompt(result.msg);
        }
         for (var i=0;i<10;i++){
             var container4 = document.getElementById("container4");
             var h1 = document.createElement("h5");
             h1.innerText="玩家"+i+"";
             h1.className = "player";
             container4.appendChild(h1);
         }
    </script>
    <script>
         function createPlayers(players) {
             console.log(players.length);
             for(var i=0;i<players.length;i++){
                 console.log(players.length);
                 var container4 = document.getElementById("container4");
                 var h1 = document.createElement("h5");
                 h1.innerText="玩家"+(i+1)+"";
                 h1.className = "player";
                 switch(players[i].type){
                     case 0:
                         h1.innerText+="    普通牌";break;
                     case 1:
                         h1.innerText+="    对子";break;
                     case 2:
                         h1.innerText+="    顺子";break;
                     case 3:
                         h1.innerText+="    同花";break;
                     case 4:
                         h1.innerText+="    同花顺";break;
                     case 5:
                         h1.innerText+="    炸弹";break;
                 }
                 container4.appendChild(h1);
                 var cards = players[i].cards;
                 console.log(cards.length);
                 for(var j=0;j<cards.length;j++){
                     var flower;
                     switch (cards[j].flower) {
                         case 1: //梅花
                             flower = "clubs";break;
                         case 2: //红桃
                             flower = "hearts";break;
                         case 3: //黑桃
                             flower = "spades";break;
                         case 0: //方片
                             flower = "diamonds";break;
                     }
                     var number="";
                     console.log("parseInt(cards[j].number):"+parseInt(cards[j].number));
                     if (parseInt(cards[j].number) <= 10) {
                         number = "" + cards[j].number;
                     } else if (parseInt(cards[j].number) == 11) {
                         number = "j";
                     } else if (parseInt(cards[j].number) == 12) {
                         number = "q";
                     } else if (parseInt(cards[j].number) == 13) {
                         number = "k";
                     } else {
                         number = "a";
                     }
                     container4.appendChild(Poker.getCardImage(60,flower,number));
                 }
             }
         }
        function start() {
            console.log($(".player").size());
            $.ajax({
                url:"http://localhost:8080/zjh/demo",
                type:"get",
                data:{count:$(".player").size()},
                dataType:"json",
                success: function (data,textStatus) {
                    console.log(data);
                    createPlayers(data);
                }
            });
        }
    </script>

</body>
</html>